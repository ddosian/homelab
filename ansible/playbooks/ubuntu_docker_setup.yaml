---
- name: Install docker & setup portainer agent
  hosts: docker
  become: yes
  become_method: sudo
  tasks:
    - name: Check if Docker is installed
      ansible.builtin.command: docker --version
      register: docker_check
      changed_when: false
      failed_when: false

    - name: Show Docker version when present
      ansible.builtin.debug:
        msg: "Docker already installed: {{ docker_check.stdout }}"
      when: docker_check.rc == 0